# SAiGE Chatbot API

## Installation

```bash
git clone https://github.com/yourusername/sage_chatbot.git
cd sage_chatbot

python -m venv venv
source venv/bin/activate

pip install -r requirements.txt
```

## Configuration

`.env` file을 생성하고 다음 세 코드와 OpenAI API key를 입력합니다:
```
OPENAI_API_KEY=your_api_key_here
REDIS_URL=redis://localhost:6379
ENVIRONMENT=development
```

## Run

```bash
python main.py
```

API documentation: http://localhost:8000/docs

## Example

### First Request
```bash
curl -X POST "http://localhost:8000/api/v1/chat" \
-H "Content-Type: application/json" \
-d '{
  "message": "스마트폰에서 사진을 찍는 방법을 알려주세요",
  "session_id": "test_user_001"
}'
```

### First Response
```json
{
  "message": "물론입니다! 스마트폰에서 사진을 찍는 방법을 단계별로 쉽게 설명해드릴게요.\n\n1. **스마트폰을 켭니다**: 먼저, 스마트폰의 전원 버튼을 눌러서 화면을 켭니다.\n\n2. **카메라 앱을 찾습니다**: 화면에서 카메라 아이콘을 찾아서 눌러주세요. 카메라 아이콘은 보통 사진 모양으로 되어 있습니다. \n\n3. **사진 촬영 모드 확인**: 카메라 앱이 열리면, 기본적으로 사진 촬영 모드로 되어 있을 거예요. 만약 다른 모드가 있다면, '사진' 또는 '촬영'이라고 적힌 버튼을 선택해주세요.\n\n4. **대상에 초점을 맞춥니다**: 사진을 찍고 싶은 대상을 화면 중앙에 두고, 화면을 터치해서 초점을 맞춥니다. 그러면 화면이 조금 밝아지거나 어두워질 수 있어요.\n\n5. **사진 찍기**: 화면에 있는 셔터 버튼(사진을 찍는 버튼)을 눌러주세요. 버튼은 화면의 하단 가운데에 위치해 있습니다.\n\n6. **사진 확인하기**: 사진을 찍고 나면, 화면에 작은 미리보기 이미지가 나타납니다. 그걸 눌러서 찍은 사진을 확인할 수 있습니다.\n\n이렇게 하면 스마트폰에서 사진을 찍을 수 있습니다! 이해가 되셨나요? 혹시 더 궁금한 점이나 도움이 필요하신 부분이 있으신가요?",
  "session_id": "test_user_001",
  "timestamp": "2025-07-22T12:33:40.242639",
  "suggestions": null
}
```

### Second Request
```bash
curl -X POST "http://localhost:8000/api/v1/chat" \
-H "Content-Type: application/json" \
-d '{
  "message": "찍은 사진은 어디에서 볼 수 있나요?",
  "session_id": "test_user_001"
}'
```

### Second Response
```json
{
  "message": "찍은 사진을 보는 방법도 간단하게 설명해드릴게요.\n\n1. **카메라 앱을 닫습니다**: 사진을 다 찍으셨다면, 카메라 앱을 종료해주세요.\n\n2. **갤러리 앱을 찾습니다**: 스마트폰의 화면에서 '갤러리'라는 앱을 찾아서 열어주세요. 갤러리 앱 아이콘은 보통 여러 개의 사진이 모여 있는 모양입니다.\n\n3. **사진 폴더 열기**: 갤러리 앱을 열면, 찍은 사진들이 있는 폴더가 보일 거예요. '앨범' 또는 '사진'이라는 항목을 선택하면, 사진들이 나열되어 있습니다.\n\n4. **사진 선택하기**: 원하는 사진을 터치하면 더 크게 볼 수 있습니다. 여기서 사진을 편집하거나 삭제할 수도 있어요.\n\n이렇게 하면 찍은 사진을 쉽게 찾을 수 있습니다! 이해가 되셨나요? 추가로 궁금한 점이 있으신가요?",
  "session_id": "test_user_001",
  "timestamp": "2025-07-22T12:37:43.379651",
  "suggestions": null
}
```

### Get Chat History
```bash
curl -X GET "http://localhost:8000/api/v1/chat/test_user_001/history"
```

### History Response
```json
{
  "session_id": "test_user_001",
  "messages": [
    {
      "role": "user",
      "content": "스마트폰에서 사진을 찍는 방법을 알려주세요",
      "timestamp": "2025-07-22T12:33:38.547450"
    },
    {
      "role": "assistant",
      "content": "물론입니다! 스마트폰에서 사진을 찍는 방법을 단계별로 쉽게 설명해드릴게요.\n\n1. **스마트폰을 켭니다**: 먼저, 스마트폰의 전원 버튼을 눌러서 화면을 켭니다.\n\n2. **카메라 앱을 찾습니다**: 화면에서 카메라 아이콘을 찾아서 눌러주세요. 카메라 아이콘은 보통 사진 모양으로 되어 있습니다. \n\n3. **사진 촬영 모드 확인**: 카메라 앱이 열리면, 기본적으로 사진 촬영 모드로 되어 있을 거예요. 만약 다른 모드가 있다면, '사진' 또는 '촬영'이라고 적힌 버튼을 선택해주세요.\n\n4. **대상에 초점을 맞춥니다**: 사진을 찍고 싶은 대상을 화면 중앙에 두고, 화면을 터치해서 초점을 맞춥니다. 그러면 화면이 조금 밝아지거나 어두워질 수 있어요.\n\n5. **사진 찍기**: 화면에 있는 셔터 버튼(사진을 찍는 버튼)을 눌러주세요. 버튼은 화면의 하단 가운데에 위치해 있습니다.\n\n6. **사진 확인하기**: 사진을 찍고 나면, 화면에 작은 미리보기 이미지가 나타납니다. 그걸 눌러서 찍은 사진을 확인할 수 있습니다.\n\n이렇게 하면 스마트폰에서 사진을 찍을 수 있습니다! 이해가 되셨나요? 혹시 더 궁금한 점이나 도움이 필요하신 부분이 있으신가요?",
      "timestamp": "2025-07-22T12:33:38.547458"
    },
    {
      "role": "user",
      "content": "찍은 사진은 어디에서 볼 수 있나요?",
      "timestamp": "2025-07-22T12:37:41.789929"
    },
    {
      "role": "assistant",
      "content": "찍은 사진을 보는 방법도 간단하게 설명해드릴게요.\n\n1. **카메라 앱을 닫습니다**: 사진을 다 찍으셨다면, 카메라 앱을 종료해주세요.\n\n2. **갤러리 앱을 찾습니다**: 스마트폰의 화면에서 '갤러리'라는 앱을 찾아서 열어주세요. 갤러리 앱 아이콘은 보통 여러 개의 사진이 모여 있는 모양입니다.\n\n3. **사진 폴더 열기**: 갤러리 앱을 열면, 찍은 사진들이 있는 폴더가 보일 거예요. '앨범' 또는 '사진'이라는 항목을 선택하면, 사진들이 나열되어 있습니다.\n\n4. **사진 선택하기**: 원하는 사진을 터치하면 더 크게 볼 수 있습니다. 여기서 사진을 편집하거나 삭제할 수도 있어요.\n\n이렇게 하면 찍은 사진을 쉽게 찾을 수 있습니다! 이해가 되셨나요? 추가로 궁금한 점이 있으신가요?",
      "timestamp": "2025-07-22T12:37:41.789938"
    }
  ],
  "created_at": "2025-07-22T12:33:32.057635",
  "last_activity": "2025-07-22T12:37:41.789942",
  "user_info": null
}